<html lang="en">
<head>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "db5ff4b3-1170-45f0-8b54-2afc9e626f44",
          notifyButton: { enable: true },
          promptOptions: {
            slidedown: {
              enabled: true,
              actionMessage: "We‚Äôd like to send you updates!",
              acceptButtonText: "Yes, notify me",
              cancelButtonText: "No thanks"
            }
          }
        });
      });
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Future Search</title>
    <meta name="description" content="Future Search je modern√≠ vyhled√°vaƒç s podporou webu a obr√°zk≈Ø. Vyzkou≈°ej rychl√© a p≈ôehledn√© vyhled√°v√°n√≠.">
    <link rel="canonical" href="https://futuresearch.netlify.app/" />
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"></noscript>
    <link rel="icon" type="image/png" href="favicon.png" sizes="32x32" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- keep your existing styles --- */
        body { font-family: 'Roboto', sans-serif; margin:0; padding:0; height:100vh; transition: background 0.3s ease, transform 0.3s ease; cursor:none; }
        body.dark-theme { background:#000; background-size:cover; background-position:center; }
        body.light-theme { background: url('https://cdn.pixabay.com/photo/2020/01/21/20/30/earth-4780749_960_720.jpg') no-repeat center center fixed; background-size:cover; }
        .theme-switch { position: fixed; top:15px; right:15px; padding:10px; font-size:22px; background:#00e0ff; border-radius:50%; border:none; cursor:pointer; color:#121212; z-index:10000; display:flex; justify-content:center; align-items:center; }
        .search-container { display:flex; justify-content:center; align-items:center; gap:10px; margin:0 auto 30px auto; width:fit-content; }
        #searchBar { width:300px; padding:15px; font-size:18px; border-radius:10px 0 0 10px; border:2px solid #00e0ff; outline:none; background:transparent; color:#e0e0e0; }
        #searchCategory { width:150px; padding:15px; font-size:18px; border-radius:10px; border:2px solid #00e0ff; background:transparent; color:#e0e0e0; cursor:pointer; }
        #searchBtn { width:50px; border:2px solid #00e0ff; border-left:none; border-radius:0 10px 10px 0; background:#00e0ff; color:#121212; font-size:22px; cursor:pointer; display:flex; justify-content:center; align-items:center; }
        #results { padding:0 20px; margin-top:20px; border:none; background:transparent; color:#fff; transition: padding 0.3s ease, margin-top 0.3s ease, border 0.3s ease, background 0.3s ease; max-height:70vh; overflow-y:auto; }
        #results.expanded{padding:20px;margin-top:20px;border:none;background:rgba(0,0,0,0.5);word-wrap:break-word;}
        .result-item{margin-bottom:20px;overflow-wrap:break-word;}
        .result-item a { color:#00e0ff; text-decoration:none; }
        .result-item a:hover { text-decoration:underline; }
        .cursor { position:fixed; width:20px; height:20px; background:rgba(0,224,255,0.8); border-radius:50%; pointer-events:none; transform:translate(-50%, -50%); box-shadow:0 0 15px rgba(0,224,255,0.8), 0 0 30px rgba(0,224,255,0.5); z-index:9999; }
        .cursor-trail { position:fixed; width:10px; height:10px; background:rgba(0,224,255,0.4); border-radius:50%; pointer-events:none; z-index:9998; animation:fade 0.6s ease-out forwards; }
        @keyframes fade { 0% { opacity:1; transform:scale(1); } 100% { opacity:0; transform:scale(2); } }
        @media (max-width: 600px) {
          body { font-size:16px; cursor:auto; }
          .search-container { flex-direction:column; gap:15px; width:90%; margin:0 auto 30px auto; }
          #searchBar { width:100%; font-size:20px; padding:15px 20px; border-radius:10px; text-align:center; }
          #searchCategory { width:100%; font-size:18px; padding:12px; border-radius:10px; }
          #searchBtn { width:100%; padding:15px; font-size:24px; border-radius:10px; }
          #results.expanded { height:auto; max-height:60vh; padding:10px; margin-top:15px; }
          .cursor, .cursor-trail { display:none; }
        }
    </style>
</head>
<body class="dark-theme">
<div id="bookmarks-bar"></div>
<div style="text-align:center;">
  <h1 onclick="window.location.href='https://futuresearch.netlify.app'" style="color:lightblue;text-shadow:0 0 10px #00e0ff;cursor:pointer;">
    Future Search
  </h1>
</div>
<button class="theme-switch" id="themeToggleBtn" onclick="toggleTheme()">üåô</button>
<div class="search-container">
  <input type="text" id="searchBar" placeholder="Type a keyword...">
  <button id="searchBtn" onclick="performSearch()">üîç</button>
  <select id="searchCategory">
    <option value="web">Web</option>
    <option value="image">Images</option>
  </select>
</div>
<div id="results"></div>
<div class="cursor" id="cursor"></div>
<script>
const API_CSE_PAIRS = [
  { apiKey: 'AIzaSyDWNsfBSjfD7a9fnroxndZgA2XjnU_Zpe4', cseId: '84d63b08624fe419d' },
  { apiKey: 'AIzaSyChwIVUmzhhnkP_Ut0xQyRvhHkLtMYbyyc', cseId: 'f3d0ff734a1e84bc7' }
];

let mouseX=0, mouseY=0;
document.addEventListener('mousemove',(e)=>{mouseX=e.clientX; mouseY=e.clientY; updateCursor(e);});
function updateCursor(e){
    const c=document.getElementById('cursor');
    c.style.top=e.clientY+'px'; c.style.left=e.clientX+'px';
    const t=document.createElement('div'); t.className='cursor-trail';
    t.style.top=e.clientY+'px'; t.style.left=e.clientX+'px';
    document.body.appendChild(t); setTimeout(()=>t.remove(),600);
}

function getRandomAPIConfig(){return API_CSE_PAIRS[Math.floor(Math.random()*API_CSE_PAIRS.length)];}
function getQueryFromPath(){const path=window.location.pathname; if(path.startsWith('/q/')) return decodeURIComponent(path.replace('/q/','')); return '';}

// --- infinite scroll with limit ---
let currentStart = 1;
let currentQuery = '';
let currentCategory = '';

async function performSearch(fromURL=false, append=false){
  const queryInput=document.getElementById("searchBar");
  const categorySelect=document.getElementById("searchCategory");
  if(fromURL){
    currentQuery=getQueryFromPath();
    currentCategory=new URLSearchParams(window.location.search).get('category')||'web';
    queryInput.value=currentQuery;
    categorySelect.value=currentCategory;
    currentStart = 1;
  } else if(!append){
    currentQuery=queryInput.value.trim();
    currentCategory=categorySelect.value;
    currentStart = 1;
    const newURL=`/q/${encodeURIComponent(currentQuery)}?category=${currentCategory}`;
    window.history.pushState({},'',newURL);
    document.title=currentQuery.charAt(0).toUpperCase()+currentQuery.slice(1)+' ‚Äì Future Search';
    document.getElementById("results").innerHTML=''; // clear old results
  }

  if(!currentQuery){alert('Please enter a search term'); return;}
  if(currentStart > 50){console.log('Reached max results'); return;} // max 50 results

  const resultsContainer=document.getElementById("results");
  resultsContainer.classList.add('expanded');
  resultsContainer.innerHTML += '<div>Loading more results...</div>';

  const {apiKey,cseId}=getRandomAPIConfig();
  let url=`https://www.googleapis.com/customsearch/v1?q=${encodeURIComponent(currentQuery)}&key=${apiKey}&cx=${cseId}&start=${currentStart}`;
  if(currentCategory==='image') url+='&searchType=image';

  try{
    const response=await fetch(url);
    const data=await response.json();
    if(data.items && data.items.length>0){
      resultsContainer.innerHTML = append ? resultsContainer.innerHTML.replace('Loading more results...','') : '';
      resultsContainer.innerHTML += data.items.map(item=>
        `<div class="result-item">
          <a href="${item.link}" target="_blank">${item.title}</a>
          <p class="url">${item.link}</p>
          <p class="description">${item.snippet}</p>
          <button onclick="addBookmark('${item.title}','${item.link}')">Book Site</button>
        </div>`).join('');
      currentStart += data.items.length;
    } else if(!append){ resultsContainer.innerHTML='<p>No results found.</p>'; }
  } catch(e){console.error(e);}

}

// --- detect scroll near bottom ---
document.getElementById("results").addEventListener('scroll',()=>{
  const el=document.getElementById("results");
  if(el.scrollTop + el.clientHeight >= el.scrollHeight - 50){
    performSearch(false,true); // append more results
  }
});

function toggleTheme(){const body=document.body; const btn=document.getElementById('themeToggleBtn'); body.classList.toggle("dark-theme"); body.classList.toggle("light-theme"); btn.innerText=body.classList.contains("dark-theme")?"üåô":"‚òÄÔ∏è";}

function addBookmark(title,url){let bookmarks=JSON.parse(localStorage.getItem('bookmarks'))||[]; if(bookmarks.find(b=>b.url===url)){alert("Already bookmarked"); return;} bookmarks.push({title,url}); localStorage.setItem('bookmarks',JSON.stringify(bookmarks)); displayBookmarks();}
function displayBookmarks(){const bar=document.getElementById('bookmarks-bar'); const bookmarks=JSON.parse(localStorage.getItem('bookmarks'))||[]; bar.innerHTML=bookmarks.map(b=>`<div class="bookmark"><a href="${b.url}" target="_blank">${b.title}</a></div>`).join('');}

window.addEventListener('load',()=>{
  displayBookmarks();
  const pathQuery=getQueryFromPath();
  if(pathQuery) performSearch(true);
});

document.getElementById("searchBar").addEventListener("keydown",function(event){if(event.key==="Enter") performSearch();});
</script>
<div class="seo-text">
  Future Search ‚Äî v√Ωsledky vyhled√°v√°n√≠ online. Vyzkou≈°ej vyhled√°vaƒç Future Search pro dotazy jako pes, koƒçka, technologie, poƒças√≠, hry a dal≈°√≠.
</div>
</body>
</html>
